<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrenamiento</title>

  <link rel="stylesheet" href="./style.css?v=47" />
  <link rel="manifest" href="./manifest.json?v=47" />
  <meta name="theme-color" content="#121212" />

  <!-- App principal -->
  <script type="module" src="./app.js?v=47"></script>
</head>

<body>

<!-- =====================================================
     CONTENEDOR GENERAL DE LA APP
===================================================== -->
<div id="app">

  <!-- =====================================================
       AUTH / LOGIN
  ===================================================== -->
  <section id="pantalla-auth">
    <h2>Acceso</h2>

    <input id="user-email" placeholder="Email" />
    <input id="user-pass" type="password" placeholder="Contrase√±a" />

    <button onclick="login()">Iniciar sesi√≥n</button>
    <button onclick="register()">Crear cuenta</button>
  </section>

  <!-- =====================================================
       PERFIL DE USUARIO
  ===================================================== -->
  <section id="pantalla-perfil" class="oculto">
    <h2>Perfil de usuario</h2>

    <p id="user-email-label"></p>

    <div class="perfil-acciones">
      <button onclick="syncNow()">Sincronizar</button>
      <button onclick="logout()">Cerrar sesi√≥n</button>
    </div>

    <button onclick="volverMenu()">Volver al men√∫</button>
  </section>

  <!-- =====================================================
       MEN√ö PRINCIPAL
  ===================================================== -->
  <section id="menu" class="oculto">

    <!-- Barra superior -->
    <header class="top-bar">
      <button class="hamburger-btn" onclick="toggleSidebar()">‚ò∞</button>
      <h1>Entrenamiento</h1>
    </header>

    <!-- =============================
         SELECCI√ìN DE RUTINAS
         (permite m√∫ltiples)
    ============================== -->
    <section class="bloque-rutinas">
      <h3>Rutinas disponibles</h3>

      <!-- Selector principal -->
      <select id="selector-rutina">
        <!-- din√°mico desde selectorRutinas.js -->
      </select>

      <!-- FUTURO: checklist de rutinas activas -->
      <div id="rutinas-activas">
        <!-- aqu√≠ podr√°s permitir m√∫ltiples rutinas -->
      </div>

      <button onclick="abrirEditorRutinas()">‚úèÔ∏è Crear / Editar rutinas</button>
    </section>

    <!-- =============================
         BOTONES DE D√çAS
    ============================== -->
    <section id="botones-dias">
      <!-- generado din√°micamente -->
    </section>

  </section>

  <!-- =====================================================
       SIDEBAR
  ===================================================== -->
  <div id="sidebar-overlay" class="oculto" onclick="toggleSidebar()"></div>

  <aside id="sidebar" class="sidebar-closed">
    <div class="sidebar-header">
      <h2>Men√∫</h2>
      <button class="close-sidebar" onclick="toggleSidebar()">‚úï</button>
    </div>

    <div class="sidebar-content">

      <div class="sidebar-section">
        <h3>üé® Tema</h3>
        <select id="selector-temas-sidebar"></select>
      </div>

      <hr />

      <button onclick="toggleSidebar(); mostrarPerfil()">üë§ Perfil</button>
      <button onclick="toggleSidebar(); abrirMedidas()">üìè Medidas corporales</button>
      <button onclick="toggleSidebar(); abrirHistorial()">üìä Historial</button>

      <hr />

      <button onclick="forzarActualizacion()">üîÑ Forzar actualizaci√≥n</button>
    </div>
  </aside>

  <!-- =====================================================
       PANTALLA D√çA DE ENTRENAMIENTO
  ===================================================== -->
  <section id="pantalla-dia" class="oculto">

    <h2 id="titulo-dia"></h2>

    <div id="contenido"></div>

    <!-- HIT -->
    <section id="hit-crono" class="oculto">
      <h3>HIT</h3>

      <select id="hit-tipo">
        <option value="HIT 1">HIT 1</option>
        <option value="HIT 2">HIT 2</option>
      </select>

      <h1 id="tiempo-hit">0:00</h1>

      <button onclick="iniciarHIT()">Iniciar</button>
      <button onclick="pausarHIT()">Pausar</button>
      <button onclick="resetHIT()">Reset</button>
    </section>

    <!-- TEMPORIZADORES -->
    <section id="temporizador" class="ejercicio">
      <h3>Temporizadores</h3>
      <div id="lista-timers"></div>
      <button onclick="a√±adirTimer()">A√±adir temporizador</button>

      <h1 id="tiempo">0:00</h1>

      <button onclick="pausarTemporizador()">Pausar</button>
      <button onclick="resetTemporizador()">Reset</button>
    </section>

    <!-- A√ëADIR EJERCICIO -->
    <section class="ejercicio">
      <h3>A√±adir ejercicio</h3>

      <select id="dia-ejercicio"></select>

      <input id="nuevo-nombre" placeholder="Ejercicio" />
      <input id="nuevo-peso" type="number" placeholder="Peso" />
      <input id="nuevo-series" type="number" placeholder="Series" />
      <input id="nuevo-reps-min" type="number" placeholder="Reps m√≠n" />
      <input id="nuevo-reps-max" type="number" placeholder="Reps m√°x" />

      <label><input type="checkbox" id="nuevo-fallo" /> Al fallo</label>
      <label><input type="checkbox" id="nuevo-no-progresar" /> No progresar</label>

      <button onclick="a√±adirEjercicio()">A√±adir</button>
    </section>

    <div class="acciones-dia">
      <button onclick="finalizarDia()">Finalizar sesi√≥n</button>
      <button onclick="volverMenu()">Volver</button>
      <button class="danger" onclick="borrarRutinaDia()">Borrar rutina completa</button>
    </div>
  </section>

  <!-- =====================================================
       HISTORIAL
  ===================================================== -->
  <section id="pantalla-historial" class="oculto">
    <h2>Historial</h2>

    <div id="lista-historial"></div>

    <button onclick="limpiarHistorialDuplicados()">Limpiar duplicados</button>
    <button onclick="borrarTodoHistorial()">Borrar todo</button>
    <button onclick="volverMenu()">Volver</button>
  </section>

  <!-- =====================================================
       DETALLE SESI√ìN
  ===================================================== -->
  <section id="pantalla-detalle" class="oculto">
    <h2>Detalle del entrenamiento</h2>
    <div id="detalle-sesion"></div>
    <button onclick="volverHistorial()">Volver</button>
  </section>

<!-- ================= MEDIDAS ================= -->
<section id="pantalla-medidas" class="oculto">
  <h2>Medidas corporales</h2>

  <div class="formulario-medidas">
    <label>
      <span>Peso (kg)</span>
      <input id="peso" type="number" step="0.1" placeholder="70.5">
    </label>

    <label>
      <span>Altura (cm)</span>
      <input id="altura" type="number" placeholder="175">
    </label>

    <label>
      <span>Cintura (cm)</span>
      <input id="cintura" type="number" placeholder="85">
    </label>

    <label>
      <span>Cadera (cm)</span>
      <input id="cadera" type="number" placeholder="95">
    </label>

    <label>
      <span>Pecho (cm)</span>
      <input id="pecho" type="number" placeholder="100">
    </label>

    <label>
      <span>Brazo relajado (cm)</span>
      <input id="brazo_relajado" type="number" placeholder="35">
    </label>

    <label>
      <span>Brazo contra√≠do (cm)</span>
      <input id="brazo_contraido" type="number" placeholder="38">
    </label>

    <label>
      <span>Muslo (cm)</span>
      <input id="muslo" type="number" placeholder="55">
    </label>

    <button onclick="guardarMedidas()">Guardar</button>
  </div>

  <div id="lista-medidas"></div>

  <button onclick="borrarTodoHistorialMedidas()">Borrar historial</button>
  <button onclick="volverMenu()">Volver</button>
</section>

<!-- =====================================================
     MODAL TIMER
===================================================== -->
<div id="modal-timer" class="modal oculto">
  <div class="modal-content">
    <h2>‚è± Tiempo finalizado</h2>
    <button onclick="resetDesdeModal()">Resetear</button>
  </div>
</div>

<!-- =====================================================
     SERVICE WORKER
===================================================== -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js');
  });
}
</script>

</body>
</html>
