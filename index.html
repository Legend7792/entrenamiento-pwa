<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Entrenamiento</title>

  <link rel="stylesheet" href="./style.css?v=37">
  <link rel="manifest" href="./manifest.json?v=37">
  <meta name="theme-color" content="#121212">

  <script type="module" src="./app.js?v=37"></script>
</head>

<body>

<!-- ================= AUTH ================= -->
<section id="pantalla-auth">
  <h2>Acceso</h2>

  <input id="user-email" placeholder="Email">
  <input id="user-pass" type="password" placeholder="ContraseÃ±a">

  <button onclick="login()">Iniciar sesiÃ³n</button>
  <button onclick="register()">Crear cuenta</button>
</section>

<!-- ================= PERFIL ================= -->
<section id="pantalla-perfil" class="oculto">
  <h2>Perfil de usuario</h2>

  <p id="user-email-label"></p>

  <button onclick="syncNow()">Sincronizar</button>
  <button onclick="logout()">Cerrar sesiÃ³n</button>
  <button onclick="volverMenu()">Ir al menÃº</button>
</section>

<!-- ================= MENÃš ================= -->
<section id="menu" class="oculto">
  <!-- Barra superior con hamburguesa -->
  <div class="top-bar">
    <button class="hamburger-btn" onclick="toggleSidebar()">â˜°</button>
    <h1>Entrenamiento</h1>
  </div>

  <!-- Selector de rutina -->
  <div class="ejercicio">
    <h3>Rutina activa</h3>
    <select id="selector-rutina">
      <!-- dinÃ¡mico -->
    </select>
  </div>
  
  <!-- BotÃ³n editor de rutinas -->
  <button onclick="abrirEditorRutinas()">âœï¸ Crear Mi Rutina</button>

  <!-- DÃ­as dinÃ¡micos (se generan automÃ¡ticamente) -->
  <div id="botones-dias"></div>
</section>

<!-- ================= SIDEBAR ================= -->
<div id="sidebar-overlay" class="oculto" onclick="toggleSidebar()"></div>
<aside id="sidebar" class="sidebar-closed">
  <div class="sidebar-header">
    <h2>MenÃº</h2>
    <button class="close-sidebar" onclick="toggleSidebar()">âœ•</button>
  </div>
  
  <div class="sidebar-content">
    <!-- Tema -->
    <div class="sidebar-section">
      <h3>ğŸ¨ Tema</h3>
      <select id="selector-temas-sidebar">
        <!-- dinÃ¡mico desde themes.js -->
      </select>
    </div>

    <hr>

    <!-- NavegaciÃ³n -->
    <button onclick="toggleSidebar(); mostrarPerfil()">ğŸ‘¤ Perfil</button>
    <button onclick="toggleSidebar(); abrirMedidas()">ğŸ“ Medidas corporales</button>
    <button onclick="toggleSidebar(); abrirHistorial()">ğŸ“Š Historial</button>
    
    <hr>
    
    <button onclick="forzarActualizacion()">ğŸ”„ Forzar actualizaciÃ³n</button>
  </div>
</aside>

<!-- ================= RESULTADO ================= -->
<section id="resultado" class="oculto">
  <h2>Resultado</h2>
  <div id="resumen"></div>
  <button onclick="volverMenu()">Volver</button>
</section>

<!-- ================= DÃA ================= -->
<section id="pantalla-dia" class="oculto">
  <h2 id="titulo-dia"></h2>
  <div id="contenido"></div>

  <!-- HIT -->
  <div id="hit-crono" class="oculto">
    <h3>HIT</h3>

    <select id="hit-tipo">
      <option value="HIT 1">HIT 1</option>
      <option value="HIT 2">HIT 2</option>
    </select>

    <h1 id="tiempo-hit">0:00</h1>

    <button onclick="iniciarHIT()">Iniciar</button>
    <button onclick="pausarHIT()">Pausar</button>
    <button onclick="resetHIT()">Reset</button>
  </div>

  <!-- TEMPORIZADOR -->
  <div id="temporizador" class="ejercicio">
    <h3>Temporizadores</h3>

    <div id="lista-timers"></div>
    <button onclick="aÃ±adirTimer()">AÃ±adir temporizador</button>

    <h1 id="tiempo">0:00</h1>

    <button onclick="pausarTemporizador()">Pausar</button>
    <button onclick="resetTemporizador()">Reset</button>
  </div>

  <!-- AÃ‘ADIR EJERCICIO -->
  <div class="ejercicio">
    <h3>AÃ±adir ejercicio</h3>

    <select id="dia-ejercicio">
      <option value="torso_fuerza">DÃ­a 1 â€“ Torso Fuerza</option>
      <option value="pierna_fuerza">DÃ­a 2 â€“ Pierna Fuerza</option>
      <option value="torso_hipertrofia">DÃ­a 3 â€“ Torso Hipertrofia</option>
      <option value="pierna_hipertrofia">DÃ­a 4 â€“ Pierna Hipertrofia</option>
      <option value="potencia">DÃ­a 5 â€“ Potencia</option>
    </select>

    <input id="nuevo-nombre" placeholder="Ejercicio">
    <input id="nuevo-peso" type="number" placeholder="Peso">
    <input id="nuevo-series" type="number" placeholder="Series">
    <input id="nuevo-reps-min" type="number" placeholder="Reps mÃ­n">
    <input id="nuevo-reps-max" type="number" placeholder="Reps mÃ¡x">

    <label><input type="checkbox" id="nuevo-fallo"> Al fallo</label>
    <label><input type="checkbox" id="nuevo-no-progresar"> No progresar</label>

    <button onclick="aÃ±adirEjercicio()">AÃ±adir</button>
  </div>

  <button onclick="finalizarDia()">Finalizar sesiÃ³n</button>
  <button onclick="volverMenu()">Volver</button>
  <button class="danger" onclick="borrarRutinaDia()">Borrar rutina completa</button>
</section>

<!-- ================= HISTORIAL ================= -->
<section id="pantalla-historial" class="oculto">
  <h2>Historial</h2>
  <div id="lista-historial"></div>

  <button onclick="limpiarHistorialDuplicados()">Limpiar duplicados</button>
  <button onclick="borrarTodoHistorial()">Borrar todo</button>
  <button onclick="volverMenu()">Volver</button>
</section>

<!-- ================= MEDIDAS ================= -->
<section id="pantalla-medidas" class="oculto">
  <h2>Medidas corporales</h2>

  <div class="ejercicio">
    <input id="peso" type="number" step="0.1" placeholder="Peso (kg)">
    <input id="altura" type="number" placeholder="Altura (cm)">
    <input id="cintura" type="number" placeholder="Cintura">
    <input id="cadera" type="number" placeholder="Cadera">
    <input id="pecho" type="number" placeholder="Pecho">
    <input id="brazo_relajado" type="number" placeholder="Brazo relajado">
    <input id="brazo_contraido" type="number" placeholder="Brazo contraÃ­do">
    <input id="muslo" type="number" placeholder="Muslo">

    <button onclick="guardarMedidas()">Guardar</button>
  </div>

  <div id="lista-medidas"></div>

  <button onclick="borrarTodoHistorialMedidas()">Borrar historial</button>
  <button onclick="volverMenu()">Volver</button>
</section>

<!-- ================= DETALLE ================= -->
<section id="pantalla-detalle" class="oculto">
  <h2>Detalle del entrenamiento</h2>
  <div id="detalle-sesion"></div>
  <button onclick="volverHistorial()">Volver</button>
</section>

<!-- ================= CONFIG RUTINA ================= -->
<section id="acciones-rutina" class="oculto">
  <h3>ConfiguraciÃ³n de rutina</h3>

  <button onclick="confirmarBorradoBase()">Borrar rutina base</button>
  <button onclick="mostrarConfigDia()">AÃ±adir dÃ­a</button>

  <div id="config-dia" class="oculto">
    <input id="nombre-dia" placeholder="Nombre del dÃ­a">
    <label><input type="checkbox" id="dia-timer"> Temporizador</label>
    <label><input type="checkbox" id="dia-crono"> CronÃ³metro</label>
    <button onclick="crearDia()">Guardar dÃ­a</button>
  </div>
</section>

<!-- ================= MODAL ================= -->
<div id="modal-timer" class="modal oculto">
  <div class="modal-content">
    <h2>â± Tiempo finalizado</h2>
    <button onclick="resetDesdeModal()">Resetear</button>
  </div>
</div>

<!-- ================= SERVICE WORKER ================= -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js');
  });
}
</script>

</body>
</html>
